<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login - AhorraApp</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        background: linear-gradient(135deg, #0d5c75, #092b3a);
      }
      .login-card {
        max-width: 900px;
        width: 100%;
      }
      .side-img {
        background-image: url("https://cdn-icons-png.flaticon.com/512/2331/2331970.png");
        background-size: 70%;
        background-position: center;
        background-repeat: no-repeat;
      }
      .form-section {
        backdrop-filter: blur(5px);
      }
    </style>
  </head>

  <body class="d-flex align-items-center justify-content-center min-vh-100">
    <div
      class="card login-card shadow-lg rounded-4 overflow-hidden animate__animated animate__fadeIn"
    >
      <div class="row g-0">
        <!-- Imagen -->
        <div class="col-md-6 d-none d-md-block side-img bg-light"></div>

        <!-- Formulario -->
        <div class="col-md-6 p-4 bg-white form-section">
          <h3 class="text-center fw-bold mb-4 text-primary">
            <i class="bi bi-piggy-bank-fill text-warning"></i> AhorraApp
          </h3>

          <div
            id="alert-box"
            class="alert alert-danger d-none"
            role="alert"
          ></div>

          <form id="login-form" novalidate>
            <!-- Correo -->
            <div class="mb-3">
              <label for="user-email" class="form-label fw-semibold"
                >Correo</label
              >
              <input
                id="user-email"
                name="correo"
                class="form-control rounded-3"
                type="email"
                required
                autocomplete="email"
              />
            </div>

            <!-- Contraseña -->
            <div class="mb-3">
              <label for="user-pass" class="form-label fw-semibold"
                >Contraseña</label
              >
              <div class="input-group">
                <input
                  id="user-pass"
                  name="contrasena"
                  class="form-control rounded-3"
                  type="password"
                  required
                  autocomplete="current-password"
                />
                <span
                  class="input-group-text"
                  onclick="togglePass('user-pass', this)"
                >
                  <i class="bi bi-eye-fill"></i>
                </span>
              </div>
            </div>

            <!-- Acciones -->
            <div class="d-grid gap-2">
              <button
                id="btn-login"
                class="btn btn-primary btn-lg fw-bold rounded-3"
                type="submit"
              >
                <i class="bi bi-box-arrow-in-right me-2"></i> Iniciar sesión
              </button>

              <a
                class="btn btn-outline-secondary fw-semibold rounded-3"
                href="/ahorrapp/registro"
              >
                <i class="bi bi-person-plus"></i> Crear cuenta
              </a>
            </div>
          </form>

          <!-- Loading -->
          <div id="loading" class="text-center mt-3 d-none">
            <div class="spinner-border text-primary"></div>
            <p class="text-muted small mt-2">Ingresando...</p>
          </div>
        </div>
      </div>
    </div>

    <script>
      const togglePass = (id, el) => {
        const input = document.getElementById(id);
        const icon = el.querySelector("i");
        input.type = input.type === "password" ? "text" : "password";
        icon.classList.toggle("bi-eye-slash-fill");
      };
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/service/auth.js"></script>
    <script src="/js/login.js"></script>
  </body>
</html>
